<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Raleway:wght@300;400;600;700&family=Lora:ital,wght@1,400&display=swap" rel="stylesheet">
<style>
  :root {
    --bg:       #f4f6fb;
    --white:    #ffffff;
    --accent:   #1e3a5f;
    --accent2:  #2d5a8e;
    --teal:     #1a7a8a;
    --muted:    #6070a0;
    --shadow:   0 4px 32px rgba(30,58,95,0.16);
  }
  * { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    background: var(--bg);
    font-family: 'Raleway', sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 20px 12px 16px;
    min-height: 100vh;
  }

  .widget {
    width: 100%;
    max-width: 700px;
    background: var(--white);
    border-radius: 8px;
    box-shadow: var(--shadow);
    overflow: hidden;
    border-top: 4px solid var(--accent);
  }

  /* â”€â”€ HEADER â”€â”€ */
  .widget-header {
    background: linear-gradient(135deg, var(--accent) 0%, var(--accent2) 100%);
    padding: 12px 18px;
    display: flex;
    align-items: center;
    justify-content: space-between;
  }
  .widget-header-left {
    display: flex;
    align-items: center;
    gap: 8px;
  }
  .header-icon { font-size: 16px; color: rgba(255,255,255,0.85); }
  .header-title {
    font-size: 10px;
    font-weight: 700;
    letter-spacing: 3px;
    text-transform: uppercase;
    color: rgba(255,255,255,0.92);
  }
  .speed-controls {
    display: flex;
    align-items: center;
    gap: 6px;
  }
  .speed-label {
    font-size: 9px;
    color: rgba(255,255,255,0.6);
    letter-spacing: 1px;
    text-transform: uppercase;
  }
  .speed-btn {
    background: rgba(255,255,255,0.15);
    border: 1px solid rgba(255,255,255,0.25);
    color: white;
    font-size: 10px;
    font-weight: 700;
    padding: 3px 8px;
    border-radius: 4px;
    cursor: pointer;
    transition: background 0.15s;
    font-family: 'Raleway', sans-serif;
    letter-spacing: 0.5px;
  }
  .speed-btn:hover { background: rgba(255,255,255,0.28); }
  .speed-btn.active { background: rgba(255,255,255,0.35); border-color: rgba(255,255,255,0.6); }

  /* â”€â”€ CANVAS AREA â”€â”€ */
  .canvas-wrap {
    background: radial-gradient(ellipse at center, #0d1b35 0%, #060d1f 60%, #020710 100%);
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 10px;
    position: relative;
  }

  canvas {
    display: block;
    border-radius: 4px;
  }

  /* â”€â”€ PLANET INFO BAR â”€â”€ */
  .info-bar {
    background: #f8faff;
    border-top: 1px solid #dce4f4;
    padding: 10px 16px;
    display: flex;
    align-items: center;
    gap: 6px;
    min-height: 38px;
    flex-wrap: wrap;
  }
  .info-planet-symbol {
    font-size: 18px;
    line-height: 1;
  }
  .info-planet-name {
    font-size: 11px;
    font-weight: 700;
    color: var(--accent);
    letter-spacing: 1px;
    text-transform: uppercase;
  }
  .info-sep {
    color: #c0c8dc;
    font-size: 12px;
  }
  .info-period {
    font-family: 'Lora', serif;
    font-style: italic;
    font-size: 11px;
    color: var(--teal);
  }
  .info-hint {
    margin-left: auto;
    font-size: 10px;
    color: var(--muted);
    letter-spacing: 0.5px;
    opacity: 0.7;
  }

  /* â”€â”€ FOOTER â”€â”€ */
  footer {
    text-align: center;
    padding: 8px;
    font-size: 10px;
    color: var(--muted);
    opacity: 0.6;
    letter-spacing: 0.5px;
  }
</style>
</head>
<body>

<div class="widget">

  <div class="widget-header">
    <div class="widget-header-left">
      <span class="header-icon">ğŸª</span>
      <span class="header-title">UkÅ‚ad SÅ‚oneczny</span>
    </div>
    <div class="speed-controls">
      <span class="speed-label">PrÄ™dkoÅ›Ä‡</span>
      <button class="speed-btn" data-speed="1">1Ã—</button>
      <button class="speed-btn active" data-speed="365">Rok/s</button>
      <button class="speed-btn" data-speed="3650">10Ã—</button>
    </div>
  </div>

  <div class="canvas-wrap">
    <canvas id="solar" width="680" height="680"></canvas>
  </div>

  <div class="info-bar">
    <span class="info-planet-symbol" id="info-symbol">â˜‰</span>
    <span class="info-planet-name" id="info-name">NajedÅº na planetÄ™</span>
    <span class="info-sep" id="info-sep" style="display:none">Â·</span>
    <span class="info-period" id="info-period"></span>
    <span class="info-hint">Animacja w czasie rzeczywistym</span>
  </div>

</div>

<footer>astrologiaewolucyjna.com Â· Prawdziwe okresy orbitalne</footer>

<script>
const canvas = document.getElementById('solar');
const ctx    = canvas.getContext('2d');

// â”€â”€ Responsive canvas â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function resizeCanvas() {
  const wrap  = canvas.parentElement;
  const maxW  = Math.min(wrap.clientWidth - 20, 500);
  canvas.style.width  = maxW + 'px';
  canvas.style.height = maxW + 'px';
}
resizeCanvas();
window.addEventListener('resize', resizeCanvas);

// â”€â”€ Planet data â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// period: orbital period in Earth days
// r: visual orbit radius (pixels on 500px canvas)
// size: visual radius
// color: planet colour
// name, symbol
const PLANETS = [
  { name:'Merkury', symbol:'â˜¿', period: 87.97,  r: 62,  size: 3.8, color:'#a0a8b8', trail:'#a0a8b840' },
  { name:'Wenus',   symbol:'â™€', period: 224.7,  r: 100, size: 5.2, color:'#d4a843', trail:'#d4a84340' },
  { name:'Ziemia',  symbol:'âŠ•', period: 365.25, r: 138, size: 5.5, color:'#4a9edd', trail:'#4a9edd40' },
  { name:'Mars',    symbol:'â™‚', period: 686.97, r: 178, size: 4.4, color:'#c0512a', trail:'#c0512a40' },
  { name:'Jowisz',  symbol:'â™ƒ', period: 4332.6, r: 232, size: 9.5, color:'#c4924a', trail:'#c4924a30' },
  { name:'Saturn',  symbol:'â™„', period: 10759,  r: 272, size: 8.0, color:'#d4b86a', trail:'#d4b86a30', rings: true },
  { name:'Uran',    symbol:'â›¢', period: 30687,  r: 305, size: 6.5, color:'#7ecfd4', trail:'#7ecfd430' },
  { name:'Neptun',  symbol:'â™†', period: 60190,  r: 330, size: 6.2, color:'#3060d0', trail:'#3060d030' },
];

// Trail history per planet (stores angles)
const trails = PLANETS.map(() => []);
const TRAIL_LEN = 90; // degrees of trail arc

// â”€â”€ State â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
let speed      = 365;   // days per second
let lastTime   = null;
let simTime    = 0;     // elapsed simulation days
let hoveredIdx = null;
let animId;

// Starting angles â€” spread them out naturally
PLANETS.forEach((p, i) => {
  p.angle = (i * 137.5) % 360; // golden angle spread
});

// â”€â”€ Speed buttons â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
document.querySelectorAll('.speed-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    speed = parseInt(btn.dataset.speed);
    document.querySelectorAll('.speed-btn').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
  });
});

// â”€â”€ Main draw â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function draw(ts) {
  if (!lastTime) lastTime = ts;
  const dt    = Math.min((ts - lastTime) / 1000, 0.05); // seconds, capped
  lastTime    = ts;
  simTime    += dt * speed;

  const W  = canvas.width;
  const H  = canvas.height;
  const cx = W / 2;
  const cy = H / 2;

  // Clear
  ctx.clearRect(0, 0, W, H);

  // Deep space background gradient
  const bgGrad = ctx.createRadialGradient(cx, cy, 0, cx, cy, W * 0.7);
  bgGrad.addColorStop(0,   '#1a2d50');
  bgGrad.addColorStop(0.5, '#0d1a30');
  bgGrad.addColorStop(1,   '#020710');
  ctx.fillStyle = bgGrad;
  ctx.fillRect(0, 0, W, H);

  // Stars
  drawStars(cx, cy, W, H);

  // Update angles & trails
  PLANETS.forEach((p, i) => {
    const dAngle = (dt * speed / p.period) * 360;
    p.angle = (p.angle + dAngle) % 360;
    trails[i].push(p.angle);
    if (trails[i].length > TRAIL_LEN * 2) trails[i].shift();
  });

  // Draw orbits
  PLANETS.forEach((p, i) => {
    ctx.beginPath();
    ctx.arc(cx, cy, p.r, 0, Math.PI * 2);
    ctx.strokeStyle = hoveredIdx === i ? 'rgba(255,255,255,0.20)' : 'rgba(255,255,255,0.07)';
    ctx.lineWidth   = hoveredIdx === i ? 1.2 : 0.7;
    ctx.stroke();
  });

  // Draw trails
  PLANETS.forEach((p, i) => {
    const t = trails[i];
    if (t.length < 2) return;
    for (let j = 1; j < t.length; j++) {
      const alpha = (j / t.length) * 0.55;
      const a1 = (t[j-1] - 90) * Math.PI / 180;
      const a2 = (t[j]   - 90) * Math.PI / 180;
      ctx.beginPath();
      ctx.moveTo(cx + p.r * Math.cos(a1), cy + p.r * Math.sin(a1));
      ctx.lineTo(cx + p.r * Math.cos(a2), cy + p.r * Math.sin(a2));
      ctx.strokeStyle = p.color + Math.round(alpha * 255).toString(16).padStart(2,'0');
      ctx.lineWidth   = hoveredIdx === i ? 2.5 : 1.5;
      ctx.stroke();
    }
  });

  // Draw planets
  PLANETS.forEach((p, i) => {
    const a  = (p.angle - 90) * Math.PI / 180;
    const px = cx + p.r * Math.cos(a);
    const py = cy + p.r * Math.sin(a);
    p._x = px; p._y = py; // store for hover

    const isHov = hoveredIdx === i;
    const s     = isHov ? p.size * 1.35 : p.size;

    // Saturn rings
    if (p.rings) {
      ctx.save();
      ctx.translate(px, py);
      ctx.rotate(0.4);
      ctx.scale(1, 0.35);
      ctx.beginPath();
      ctx.arc(0, 0, s * 2.2, 0, Math.PI * 2);
      ctx.strokeStyle = isHov ? 'rgba(212,184,106,0.75)' : 'rgba(212,184,106,0.45)';
      ctx.lineWidth   = isHov ? 2.8 : 2.0;
      ctx.stroke();
      ctx.restore();
    }

    // Glow
    const glow = ctx.createRadialGradient(px, py, 0, px, py, s * (isHov ? 3.5 : 2.5));
    glow.addColorStop(0,   p.color + 'cc');
    glow.addColorStop(0.4, p.color + '44');
    glow.addColorStop(1,   p.color + '00');
    ctx.beginPath();
    ctx.arc(px, py, s * (isHov ? 3.5 : 2.5), 0, Math.PI * 2);
    ctx.fillStyle = glow;
    ctx.fill();

    // Planet body
    const bodyGrad = ctx.createRadialGradient(px - s*0.3, py - s*0.3, s*0.1, px, py, s);
    bodyGrad.addColorStop(0, lighten(p.color, 40));
    bodyGrad.addColorStop(1, darken(p.color, 30));
    ctx.beginPath();
    ctx.arc(px, py, s, 0, Math.PI * 2);
    ctx.fillStyle = bodyGrad;
    ctx.fill();

    // Label on hover
    if (isHov) {
      ctx.font = `bold 11px 'Raleway', sans-serif`;
      ctx.fillStyle = '#ffffff';
      ctx.textAlign = 'center';
      const lx = px, ly = py - s - 8;
      ctx.fillText(p.symbol + ' ' + p.name, lx, ly);
    }
  });

  // Sun
  drawSun(cx, cy);

  animId = requestAnimationFrame(draw);
}

// â”€â”€ Sun â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function drawSun(cx, cy) {
  const t = Date.now() / 1000;

  // Outer corona pulse
  const pulse = 1 + 0.06 * Math.sin(t * 1.8);
  const corona = ctx.createRadialGradient(cx, cy, 0, cx, cy, 28 * pulse);
  corona.addColorStop(0,   'rgba(255,230,80,0.0)');
  corona.addColorStop(0.4, 'rgba(255,180,30,0.08)');
  corona.addColorStop(1,   'rgba(255,120,0,0.0)');
  ctx.beginPath();
  ctx.arc(cx, cy, 28 * pulse, 0, Math.PI * 2);
  ctx.fillStyle = corona;
  ctx.fill();

  // Sun glow
  const glow = ctx.createRadialGradient(cx, cy, 0, cx, cy, 24);
  glow.addColorStop(0,   'rgba(255,235,100,0.9)');
  glow.addColorStop(0.5, 'rgba(255,160,20,0.5)');
  glow.addColorStop(1,   'rgba(255,80,0,0.0)');
  ctx.beginPath();
  ctx.arc(cx, cy, 24, 0, Math.PI * 2);
  ctx.fillStyle = glow;
  ctx.fill();

  // Sun body
  const sunGrad = ctx.createRadialGradient(cx-4, cy-4, 2, cx, cy, 12);
  sunGrad.addColorStop(0, '#fff5a0');
  sunGrad.addColorStop(0.5, '#ffcc22');
  sunGrad.addColorStop(1, '#ff8800');
  ctx.beginPath();
  ctx.arc(cx, cy, 12, 0, Math.PI * 2);
  ctx.fillStyle = sunGrad;
  ctx.fill();

  // Sun symbol
  ctx.font = '11px serif';
  ctx.fillStyle = 'rgba(255,255,255,0.85)';
  ctx.textAlign = 'center';
  ctx.fillText('â˜‰', cx, cy + 4);
}

// â”€â”€ Stars â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
let starCache = null;
function drawStars(cx, cy, W, H) {
  if (!starCache) {
    starCache = [];
    // Fixed stars â€” generate once
    const rng = mulberry32(42);
    for (let i = 0; i < 120; i++) {
      starCache.push({
        x: rng() * W,
        y: rng() * H,
        r: rng() * 1.2 + 0.3,
        a: rng() * 0.7 + 0.3,
        twinkle: rng()
      });
    }
  }
  const t = Date.now() / 1000;
  starCache.forEach(s => {
    const alpha = s.a * (0.6 + 0.4 * Math.sin(t * (0.5 + s.twinkle)));
    ctx.beginPath();
    ctx.arc(s.x, s.y, s.r, 0, Math.PI * 2);
    ctx.fillStyle = `rgba(255,255,255,${alpha})`;
    ctx.fill();
  });
}

// â”€â”€ Hover detection â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
canvas.addEventListener('mousemove', e => {
  const rect  = canvas.getBoundingClientRect();
  const scaleX = canvas.width  / rect.width;
  const scaleY = canvas.height / rect.height;
  const mx = (e.clientX - rect.left) * scaleX;
  const my = (e.clientY - rect.top)  * scaleY;

  hoveredIdx = null;
  PLANETS.forEach((p, i) => {
    if (!p._x) return;
    const dist = Math.hypot(mx - p._x, my - p._y);
    if (dist < Math.max(p.size * 2.5, 12)) {
      hoveredIdx = i;
    }
  });

  if (hoveredIdx !== null) {
    const p = PLANETS[hoveredIdx];
    document.getElementById('info-symbol').textContent  = p.symbol;
    document.getElementById('info-name').textContent    = p.name;
    document.getElementById('info-sep').style.display   = 'inline';
    document.getElementById('info-period').textContent  = formatPeriod(p.period);
    canvas.style.cursor = 'pointer';
  } else {
    document.getElementById('info-symbol').textContent  = 'â˜‰';
    document.getElementById('info-name').textContent    = 'NajedÅº na planetÄ™';
    document.getElementById('info-sep').style.display   = 'none';
    document.getElementById('info-period').textContent  = '';
    canvas.style.cursor = 'default';
  }
});

canvas.addEventListener('mouseleave', () => {
  hoveredIdx = null;
  document.getElementById('info-symbol').textContent = 'â˜‰';
  document.getElementById('info-name').textContent   = 'NajedÅº na planetÄ™';
  document.getElementById('info-sep').style.display  = 'none';
  document.getElementById('info-period').textContent = '';
});

// Touch support
canvas.addEventListener('touchmove', e => {
  e.preventDefault();
  const touch = e.touches[0];
  canvas.dispatchEvent(new MouseEvent('mousemove', {clientX: touch.clientX, clientY: touch.clientY}));
}, {passive: false});

// â”€â”€ Helpers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function formatPeriod(days) {
  if (days < 365) return `Okres: ${Math.round(days)} dni`;
  const y = days / 365.25;
  if (y < 10) return `Okres: ${y.toFixed(1)} lat`;
  return `Okres: ${Math.round(y)} lat`;
}

function lighten(hex, amt) {
  const r = Math.min(255, parseInt(hex.slice(1,3),16) + amt);
  const g = Math.min(255, parseInt(hex.slice(3,5),16) + amt);
  const b = Math.min(255, parseInt(hex.slice(5,7),16) + amt);
  return `rgb(${r},${g},${b})`;
}

function darken(hex, amt) {
  const r = Math.max(0, parseInt(hex.slice(1,3),16) - amt);
  const g = Math.max(0, parseInt(hex.slice(3,5),16) - amt);
  const b = Math.max(0, parseInt(hex.slice(5,7),16) - amt);
  return `rgb(${r},${g},${b})`;
}

function mulberry32(seed) {
  return function() {
    seed |= 0; seed = seed + 0x6D2B79F5 | 0;
    let t = Math.imul(seed ^ seed >>> 15, 1 | seed);
    t = t + Math.imul(t ^ t >>> 7, 61 | t) ^ t;
    return ((t ^ t >>> 14) >>> 0) / 4294967296;
  };
}

// â”€â”€ Start â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
requestAnimationFrame(draw);
</script>
</body>
</html>
